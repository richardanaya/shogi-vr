<template>
  <a-collada-model src="#piece" v-bind:position="pos" v-on:click="clicked"></a-collada-model>
</template>
<script>
  var template = document.currentScript.parentNode.querySelector("template");
  Vue.component('shogi-piece', {
    props: ['piece'],
    template: template.innerHTML,
    computed: {
      pos () {
        var x = -2.05+this.piece.x*.512
        var z = 2.05-this.piece.y*.512
        return x+" .38 "+z;
      }
    },
    methods: {
      clicked: function(){
        this.dispatch('piece_selected',{piece:this.piece})
      }
    }
  })
</script>
